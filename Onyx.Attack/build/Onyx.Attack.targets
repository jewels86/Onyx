<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

    <!-- Default property -->
    <PropertyGroup>
        <OnyxPostCompilation Condition="'$(OnyxPostCompilation)'==''">true</OnyxPostCompilation>
    </PropertyGroup>
    
    <!-- Import Fody if available -->
    <Import Project="$(MSBuildThisFileDirectory)Fody.targets"
            Condition="'$(OnyxPostCompilation)' == 'true' AND Exists('$(MSBuildThisFileDirectory)Fody.targets')" />

    <UsingTask TaskName="Onyx.Attack.OnyxPostCompileTask"
               AssemblyFile="$(NuGetPackageRoot)onyx.attack/$(PackageVersion)/lib/net9.0/Onyx.Attack.dll"
               Condition="'$(OnyxPostCompilation)' == 'true'" />


    <!-- Hook the post-build task -->
    <Target Name="OnyxPostBuild" AfterTargets="Build;Publish"
            Condition="'$(OnyxPostCompilation)' == 'true'">
        <Message Text="Running OnyxPostCompileTask..." Importance="High" />
        <OnyxPostCompileTask TargetPath="$(TargetPath)" />
    </Target>


</Project>
